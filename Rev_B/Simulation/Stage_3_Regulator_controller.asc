Version 4
SHEET 1 4452 1996
WIRE 2976 -112 2944 -112
WIRE 2352 -32 2000 -32
WIRE 2944 -32 2944 -112
WIRE 2944 -32 2640 -32
WIRE 2944 -16 2944 -32
WIRE 1776 64 1728 64
WIRE 2352 64 1776 64
WIRE 2688 64 2640 64
WIRE 2688 96 2688 64
WIRE 2944 96 2944 64
WIRE 2944 96 2688 96
WIRE 1776 128 1776 64
WIRE 2736 128 2688 128
WIRE 2352 160 2208 160
WIRE 2640 160 2624 160
WIRE 2688 160 2688 128
WIRE 2688 160 2640 160
WIRE 2864 160 2688 160
WIRE 1776 224 1776 208
WIRE 1872 224 1776 224
WIRE 2000 224 2000 -32
WIRE 2000 224 1872 224
WIRE 1776 240 1776 224
WIRE 2944 240 2944 224
WIRE 3040 240 2944 240
WIRE 3440 240 3040 240
WIRE 2352 256 2304 256
WIRE 2672 256 2640 256
WIRE 1600 288 1472 288
WIRE 1712 288 1680 288
WIRE 3040 288 3040 240
WIRE 2304 336 2304 256
WIRE 2352 336 2304 336
WIRE 2672 432 2672 256
WIRE 2720 432 2672 432
WIRE 2832 432 2800 432
WIRE 2672 464 2672 432
WIRE 2832 464 2832 432
WIRE 1776 576 1776 336
WIRE 1776 576 1680 576
WIRE 2208 576 2208 160
WIRE 2208 576 1776 576
WIRE 2672 576 2672 528
WIRE 2672 576 2208 576
WIRE 2832 576 2832 528
WIRE 2832 576 2672 576
WIRE 3040 576 3040 352
WIRE 3040 576 2832 576
WIRE 2400 848 2352 848
WIRE 2752 848 2400 848
WIRE 3104 848 3056 848
WIRE 1520 880 1472 880
WIRE 1568 880 1520 880
WIRE 1936 880 1856 880
WIRE 2064 880 1936 880
WIRE 2128 880 2064 880
WIRE 1936 896 1936 880
WIRE 2400 912 2400 848
WIRE 3104 912 3104 848
WIRE 2832 944 2688 944
WIRE 1520 976 1520 880
WIRE 1568 976 1520 976
WIRE 1936 976 1856 976
WIRE 2752 976 2752 848
WIRE 1936 992 1936 976
WIRE 2064 992 2064 880
WIRE 2688 992 2688 944
WIRE 2720 992 2688 992
WIRE 2832 1008 2832 944
WIRE 2832 1008 2784 1008
WIRE 2928 1008 2832 1008
WIRE 2400 1024 2400 992
WIRE 2608 1024 2400 1024
WIRE 2720 1024 2608 1024
WIRE 3104 1024 3104 992
WIRE 3280 1024 3104 1024
WIRE 3296 1024 3280 1024
WIRE 2400 1056 2400 1024
WIRE 3104 1056 3104 1024
WIRE 3280 1088 3280 1024
WIRE 1712 1120 1712 1040
WIRE 1712 1120 1680 1120
WIRE 1936 1120 1936 1072
WIRE 1936 1120 1712 1120
WIRE 2064 1120 2064 1056
WIRE 2064 1120 1936 1120
WIRE 2400 1184 2400 1136
WIRE 2400 1184 2352 1184
WIRE 2752 1184 2752 1040
WIRE 2752 1184 2400 1184
WIRE 2928 1184 2928 1008
WIRE 3104 1184 3104 1136
WIRE 3104 1184 2928 1184
WIRE 3280 1184 3280 1152
WIRE 3280 1184 3232 1184
FLAG 1728 64 Vboost
IOPIN 1728 64 In
FLAG 2352 336 FBX
IOPIN 2352 336 BiDir
FLAG 1680 576 GND
IOPIN 1680 576 In
FLAG 3440 240 Vout
IOPIN 3440 240 Out
FLAG 2736 128 Gate
IOPIN 2736 128 Out
FLAG 2976 -112 Vbuck
IOPIN 2976 -112 Out
FLAG 1472 288 SHDN_N
IOPIN 1472 288 In
FLAG 1872 224 SHDN
FLAG 2352 1184 GND
IOPIN 2352 1184 In
FLAG 3056 848 Vout
IOPIN 3056 848 In
FLAG 3296 1024 FBX
IOPIN 3296 1024 Out
FLAG 2352 848 P3V3
FLAG 2928 1008 Vref_buf
FLAG 2608 1024 Vref
FLAG 1472 880 Vboost
IOPIN 1472 880 In
FLAG 2128 880 P3V3
FLAG 3232 1184 GND
IOPIN 3232 1184 In
FLAG 1680 1120 GND
IOPIN 1680 1120 In
SYMBOL cap 2656 464 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL res 2704 448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 7.5K
SYMBOL cap 2816 464 R0
SYMATTR InstName C3
SYMATTR Value 1000p
SYMBOL LT1575 2496 112 R0
SYMATTR InstName U1
SYMBOL My_NMOS 2960 160 R0
SYMATTR InstName X1
SYMBOL res 2928 -32 R0
SYMATTR InstName R4
SYMATTR Value 24m
SYMBOL My_capacitor 3040 336 R0
SYMATTR InstName X2
SYMBOL npn 1712 240 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 1760 112 R0
SYMATTR InstName R1
SYMATTR Value 22k
SYMBOL res 2384 896 R0
SYMATTR InstName R2
SYMATTR Value {Rref_top}
SYMBOL res 2384 1040 R0
SYMATTR InstName R9
SYMATTR Value {Rref_bot}
SYMBOL res 3088 896 R0
SYMATTR InstName R10
SYMATTR Value {Rfb}
SYMBOL res 3088 1040 R0
SYMATTR InstName R11
SYMATTR Value 500
SYMBOL OpAmps\\LT1677 2752 944 R0
SYMATTR InstName U4
SYMBOL PowerProducts\\LT3012 1712 912 R0
SYMATTR InstName U3
SYMBOL res 1920 976 R0
SYMATTR InstName R15
SYMATTR Value 1.2k
SYMBOL res 1920 880 R0
SYMATTR InstName R16
SYMATTR Value 1.8k
SYMBOL cap 2048 992 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL cap 3264 1088 R0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL res 1696 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 5k
TEXT 3096 -8 Left 2 ;Rsense:\nIt limits the current such that there is a 50mV drop on Rsense. So if we limit\nthe current to 2.1 Amps the resistor should be ~24mOhms.
TEXT 2224 728 Left 2 ;Check the TI pdf on how to output voltages below 1.2V
TEXT 2416 880 Left 2 ;Digital Potentiometer
TEXT 3224 944 Left 2 ;Digital Potentiometer
TEXT 2328 1424 Left 2 !.param Rref_top=round(Rdigital - Rref_bot)
TEXT 2328 1392 Left 2 !.param Rref_bot=round(Rdigital * Vrefext_limit/ 3.3)
TEXT 2328 1496 Left 2 !.param Rfb=max(1, round( 500*Rfb_ratio))
TEXT 3408 1096 Left 2 ;COMMENT: \nJust pass the following params\nRfb_ratio: the ratio on the 1.2V feedback resistors\nVrefext: the external voltage reference
TEXT 1344 -80 Left 2 ;This is to stop leakage from the SHDN signal to Vboost and Vbuck.\nMaking simulations better
TEXT 2328 1256 Left 2 !.param Rdigital=10k
TEXT 2328 1320 Left 2 !.param Vrefext_limit=max(0.01, min(3.3, Vrefext))
TEXT 2328 1288 Left 2 !.param Vrefint=1.2
RECTANGLE Normal 2080 640 1312 -128 2
RECTANGLE Normal 4064 112 2864 -64 2
RECTANGLE Normal 4064 752 1312 1648 2
RECTANGLE Normal 2640 1152 2336 896 2
RECTANGLE Normal 3504 1008 3056 912 2
