Version 4
SHEET 1 4452 1996
WIRE 2976 -112 2944 -112
WIRE 2352 -32 2000 -32
WIRE 2944 -32 2944 -112
WIRE 2944 -32 2640 -32
WIRE 2944 -16 2944 -32
WIRE 1776 64 1728 64
WIRE 2352 64 1776 64
WIRE 2688 64 2640 64
WIRE 2688 96 2688 64
WIRE 2944 96 2944 64
WIRE 2944 96 2688 96
WIRE 1776 128 1776 64
WIRE 2736 128 2688 128
WIRE 2352 160 2208 160
WIRE 2640 160 2624 160
WIRE 2688 160 2688 128
WIRE 2688 160 2640 160
WIRE 2864 160 2688 160
WIRE 1776 224 1776 208
WIRE 1872 224 1776 224
WIRE 2000 224 2000 -32
WIRE 2000 224 1872 224
WIRE 1776 240 1776 224
WIRE 2944 240 2944 224
WIRE 3040 240 2944 240
WIRE 3440 240 3040 240
WIRE 2352 256 2304 256
WIRE 2672 256 2640 256
WIRE 1600 288 1472 288
WIRE 1712 288 1680 288
WIRE 3040 288 3040 240
WIRE 2304 336 2304 256
WIRE 2352 336 2304 336
WIRE 2672 432 2672 256
WIRE 2720 432 2672 432
WIRE 2832 432 2800 432
WIRE 2672 464 2672 432
WIRE 2832 464 2832 432
WIRE 1776 576 1776 336
WIRE 1776 576 1680 576
WIRE 2208 576 2208 160
WIRE 2208 576 1776 576
WIRE 2672 576 2672 528
WIRE 2672 576 2208 576
WIRE 2832 576 2832 528
WIRE 2832 576 2672 576
WIRE 3040 576 3040 352
WIRE 3040 576 2832 576
WIRE 2544 1104 2496 1104
WIRE 2896 1104 2544 1104
WIRE 1552 1136 1504 1136
WIRE 1600 1136 1552 1136
WIRE 1968 1136 1888 1136
WIRE 2096 1136 1968 1136
WIRE 2160 1136 2096 1136
WIRE 3616 1136 3568 1136
WIRE 1968 1152 1968 1136
WIRE 2544 1168 2544 1104
WIRE 3616 1168 3616 1136
WIRE 2976 1200 2832 1200
WIRE 1552 1232 1552 1136
WIRE 1600 1232 1552 1232
WIRE 1968 1232 1888 1232
WIRE 2896 1232 2896 1104
WIRE 1968 1248 1968 1232
WIRE 2096 1248 2096 1136
WIRE 2832 1248 2832 1200
WIRE 2864 1248 2832 1248
WIRE 2976 1264 2976 1200
WIRE 2976 1264 2928 1264
WIRE 3072 1264 2976 1264
WIRE 2544 1280 2544 1248
WIRE 2752 1280 2544 1280
WIRE 2864 1280 2752 1280
WIRE 3616 1280 3616 1248
WIRE 3792 1280 3616 1280
WIRE 3808 1280 3792 1280
WIRE 2544 1312 2544 1280
WIRE 3616 1312 3616 1280
WIRE 3792 1344 3792 1280
WIRE 1744 1376 1744 1296
WIRE 1744 1376 1712 1376
WIRE 1968 1376 1968 1328
WIRE 1968 1376 1744 1376
WIRE 2096 1376 2096 1312
WIRE 2096 1376 1968 1376
WIRE 2544 1440 2544 1392
WIRE 2544 1440 2496 1440
WIRE 2896 1440 2896 1296
WIRE 2896 1440 2544 1440
WIRE 3616 1440 3616 1392
WIRE 3616 1440 3568 1440
WIRE 3792 1440 3792 1408
WIRE 3792 1440 3744 1440
FLAG 1728 64 Vboost
IOPIN 1728 64 In
FLAG 2352 336 FBX
IOPIN 2352 336 BiDir
FLAG 1680 576 GND
IOPIN 1680 576 In
FLAG 3440 240 Vout
IOPIN 3440 240 Out
FLAG 2736 128 Gate
IOPIN 2736 128 Out
FLAG 2976 -112 Vbuck
IOPIN 2976 -112 Out
FLAG 1472 288 SHDN_N
IOPIN 1472 288 In
FLAG 1872 224 SHDN
FLAG 2496 1440 GND
IOPIN 2496 1440 In
FLAG 3568 1136 Vout
IOPIN 3568 1136 In
FLAG 3808 1280 FBX
IOPIN 3808 1280 Out
FLAG 2496 1104 P3V3
FLAG 3072 1264 Vref_buf
FLAG 2752 1280 Vref
FLAG 3568 1440 Vref_buf
FLAG 1504 1136 Vboost
IOPIN 1504 1136 In
FLAG 2160 1136 P3V3
FLAG 3744 1440 GND
IOPIN 3744 1440 In
FLAG 1712 1376 GND
IOPIN 1712 1376 In
SYMBOL cap 2656 464 R0
SYMATTR InstName C2
SYMATTR Value 10p
SYMBOL res 2704 448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 7.5K
SYMBOL cap 2816 464 R0
SYMATTR InstName C3
SYMATTR Value 1000p
SYMBOL LT1575 2496 112 R0
SYMATTR InstName U1
SYMBOL My_NMOS 2960 160 R0
SYMATTR InstName X1
SYMBOL res 2928 -32 R0
SYMATTR InstName R4
SYMATTR Value 24m
SYMBOL My_capacitor 3040 336 R0
SYMATTR InstName X2
SYMBOL npn 1712 240 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 1760 112 R0
SYMATTR InstName R1
SYMATTR Value 5k
SYMBOL res 2528 1152 R0
SYMATTR InstName R2
SYMATTR Value {Rfb_ref_top}
SYMBOL res 2528 1296 R0
SYMATTR InstName R9
SYMATTR Value {Rfb_ref}
SYMBOL res 3600 1152 R0
SYMATTR InstName R10
SYMATTR Value {Rfb}
SYMBOL res 3600 1296 R0
SYMATTR InstName R11
SYMATTR Value 500
SYMBOL OpAmps\\LT1677 2896 1200 R0
SYMATTR InstName U4
SYMBOL PowerProducts\\LT3012 1744 1168 R0
SYMATTR InstName U3
SYMBOL res 1952 1232 R0
SYMATTR InstName R15
SYMATTR Value 1.2k
SYMBOL res 1952 1136 R0
SYMATTR InstName R16
SYMATTR Value 1.8k
SYMBOL cap 2080 1248 R0
SYMATTR InstName C4
SYMATTR Value 10µ
SYMBOL cap 3776 1344 R0
SYMATTR InstName C5
SYMATTR Value 10µ
SYMBOL res 1696 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
TEXT 3096 -8 Left 2 ;Rsense:\nIt limits the current such that there is a 50mV drop on Rsense. So if we limit\nthe current to 2.1 Amps the resistor should be ~24mOhms.
TEXT 2368 984 Left 2 ;Check the TI pdf on how to output voltages below 1.2V
TEXT 3104 88 Left 2 ;Feedback comes from digial resistor module
TEXT 2440 1496 Left 2 ;Digital Potentiometer
TEXT 3512 1496 Left 2 ;Digital Potentiometer
TEXT 2336 1704 Left 2 !.param Rfb_ref_top round(10000 - Rfb_ref)
TEXT 2336 1640 Left 2 !.param Vfb_ref_limit  min(3.3, max( 0.01, Vfb_ref))
TEXT 2336 1672 Left 2 !.param Rfb_ref round(10k * Vfb_ref_limit/ 3.3)
TEXT 3408 1696 Left 2 !.param Vwanted_limit min(25, max(1.2, Vwanted))
TEXT 3408 1728 Left 2 !.param Rfb max(1, round( 500 * ( Vwanted - Vrefint ) / (Vrefint - Vrefext)  ))
TEXT 2344 1752 Left 2 ;COMMENT: Just pass a value within 0V and Vref as param Vfb_ref
TEXT 3416 1760 Left 2 ;COMMENT: Just pass a value within 1.2V and 25V as param Vwanted
TEXT 1328 -112 Left 2 ;This is to stop leakage from the SHDN signal to Vpower.\nThe power going to the IC comes from P22V0_Vin\nMaking simulations better
TEXT 2336 1608 Left 2 !.param Rdigital 10k
TEXT 3408 1664 Left 2 !.param Vrefint=1.159 Vrefext=max(0.065, Vfb_ref)
RECTANGLE Normal 4448 1856 1296 944 2
